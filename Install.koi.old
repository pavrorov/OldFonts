
		УСТАНОВКА ПАКЕТА "OldFonts"


	Установка пакета более или менее стандартна. Ниже она
будет описана на примере teTeX-2.0, идущем под управлением
операционной системы Linux. Это именно то окружение, в которым
данный пакет был разработан и испытан. Но так как большинство
современных реализаций TeX подобны друг другу, приведённые ниже
рекомендации легко переносятся и на другие ситуации.

	Весь пакет представляет собой один архивный файл.
Распакуйте его в рабочем каталоге, например, ~/tmp, при этом в
последнем возникнет каталог texmf с многочисленными
подкаталогами, где содержатся все файлы пакета. Структура этого
каталога стандартна и соответствует структуре каталога любого
современного дистрибутива TeX, такого как, например, teTeX или
MikTeX.

	Перенесите файлы и подкаталоги пакета с сохранением
структуры в каталог, который на вашем компьютере занимает TeX.
Это может быть, например, /usr/share/texmf,
/usr/local/share/texmf или какой-нибудь ещё. Назовём этот
каталог TEXMF. Под переносом с сохранением структуры
подразумевается, что содержимое, например, каталога
~/tmp/texmf/dvipdfm/base надо перенести в каталог
TEXMF/dvipdfm/base, содержимое каталога ~/tmp/texmf/fonts/afm
переносится в каталог TEXMF/fonts/afm,  содержимое каталога
~/tmp/texmf/fonts/type1 --- в каталог TEXMF/fonts/type1 и так
далее. Для этого, как и для последующих действий, понадобятся
права администратора данной ЭВМ.

	Для использования шрифта ПТ-Курьер надо дополнить пакет
его файлами CRR35_OR.PFB и CRR35__A.PFB: хотя шрифт и свободно
распространяемый, но фирма Паратайп просит не помещать его на
www- и ftp-серверы, поэтому его и нет в составе пакета. Эти файлы
надо извлечь из двух zip-архивов, лежащих на сервере самой фирмы
по адресам http://www.fontstock.com/softdl/Courier_OR.zip и
http://www.fontstock.com/softdl/Courier_A.zip, и поместить их в
каталог TEXMF/fonts/type1/paratype/courier под именами
crr35_or.pfb и crr35__a.pfb, соответственно. Ttf-вариант Курьера
с символами старой орфографии на сервере Паратайпа отсутствует.

	Теперь надо дать знать некоторым программам, входящим в
состав TeX'а, что в его составе появились новые шрифты. Все они,
кроме ПТ-Курьера, о котором только что было сказано, и шрифтов
гарнитур Миньон и Палатино, о которых речь пойдёт ниже, входят в
состав пакета и имеются в двух форматах: PostScript Type 1 (с
расширением .pfb) и True Type (.ttf). Пользоваться можно как
одними, так и другими.

	Как правило, удобнее иметь дело со шрифтами PS Type 1,
особенно при работе с операционной системой типа Unix. Чтобы
использовать эти шрифты, можно поступить двумя способами. 

	Проще всего добавить в конец файла TEXMF/web2c/updmap.cfg
строку Map oldf-ps.map и, записав этот файл и выйдя из редактора,
дать команду updmap, которая и выполнит все дальнейшие
необходимые действия.

	Можно действовать и вручную, для чего надо проделать
следующее:
  1). Добавить в файл TEXMF/dvips/config/config.ps строку
		p +oldf-ps.map
(в самом этом файле указано, в каком именно месте её надо там
поместить);
  2). Добавить в конец файла TEXMF/dvips/config/ps2pk.map
содержимое файла TEXMF/dvips/config/oldf-ps.map; 
  3). Внести в файл TEXMF/pdftex/config/pdftex.cfg строку
		map +oldf-ps.map
(в файле указано, в каком месте её надо поставить); и, наконец,
  4). Добавить в конец файла TEXMF/dvipdfm/config/config
строку
		f oldf-ps-m.map

	Если же вы предпочитаете использовать шрифты в формате
True Type, то следует делать всё вручную, как указано в
предыдущем абзаце, но опустить два первых пункта и вместо
oldf-ps.map и oldf-ps-m.map писать в соответствующих местах
oldf-tt.map и oldf-tt-m.map.

	Завершает установку пакета команда обновления базы
данных, с помощью которой TeX и другие его программы ищут
необходимые им файлы. В teTeX это команда texhash, а в MikTeX
хорошо запустить config.bat.

	Теперь обсудим использование гарнитур Палатино и Миньон.
Разработка пакета начиналась довольно давно, и он рассчитан на
версию первой из них, которая прилагалась к операционной системе
Windows-2000. Её True Type-файлы pala.ttf, palai.ttf, palab.ttf и
palabi.ttf (фабричная версия прямого светлого шрифта pala.ttf -
1.15) не входят в состав пакета. Если они у вас есть и вы хотите
использовать их с TeX'ом при помощи данного пакета, то при работе
с teTeX их надо поместить в какой-либо подкаталог каталога
TEXMF/fonts/truetype, например, в 
TEXMF/fonts/truetype/linotype/palatino. Если такого каталога у
вашего TeX'а нет, то надо его создать. Что же касается MikTeX, то
он умеет находить требующиеся ему шрифты True Type там, где их
хранит операционная система Windows.

	Если же вы хотите использовать более новую версию
гарнитуры Палатино формата Open Type, входящую в состав
операционной системы Windows-XP (версия прямого светлого шрифта
pala.ttf - 1.40), то вам понадобится изменить некоторые файлы
поддержки на разработанные Мариусом Водзицким. Так как сами новые
шрифты не представляют особенных преимуществ, то, вероятно, будет
проще найти комплект шрифтов True Type от Windows-2000. Дальше
описана установка именно этого комплекта.

	Чтобы программы TeX могли работать со шрифтами Палатино
формата True Type, надо  в файлы, указанные в пунктах 3 и 4 выше,
дописать по одной строчке: 
	map +pala-tt.map 
и 
	f pala-tt-m.map   , 
соответственно. 

	Первая из них даёт одновременно возможность работать и с
гарнитурой Миньон. Её файлы имеют формат Open Type (расширение
otf). В составе TeX'а работать с otf-шрифтами умеет только
pdflatex, да и то с определёнными ограничениями: во-первых, он
может вставлять такие шрифты в создаваемый им pdf-документ только
целиком, а во-вторых, он находит такие шрифты, только если они
помещены в рабочую директорию. Когда же otf-шрифты находятся в
рабочей директории, то они целиком встраиваются в созданный
pdf-файл, а поскольку каждый из них имеет объём около 250 Кбайт,
то это и будет минимальный размер выходного pdf-файла, даже если
последний содержит всего несколько строчек.

	В то же время можно вообще обойтись без помещения
otf-файлов в рабочую директорию и включения их в документ. Хотя в
этом случае pdflatex и станет жаловаться на отсутствие шрифтов,
но тем не менее он прекрасно создаёт работоспособный pdf-файл и
без них. Во встраивании же шрифтов гарнитуры Миньон в pdf нет
особой нужды, потому что они входят в состав Acrobat Reader 7, и
если такой pdf им считать, то он сам вставит их и в изображение
на экране, и в печатный текст. Точно так же он встроит шрифты и в
создаваемый им печатный постскриптовский файл при печати в файл.
При этом Acrobat Reader вставляет в постскрипт только реально
имеющиеся в тексте символы, так что pdf, сделанный из такого
ps-файла --- например, посредством программы ps2pdf --- и уже
содержащий в себе шрифты, получается обыкновенного сравнительно
небольшого размера (программа ps2pdf входит в состав свободно
распространяемого программного комплекса ghostscript,
предназначенного для просмотра и печати постскриптовских и
pdf-документов и имеющегося для всех платформ). Что же касается
исходного pdf-файла, созданного pdflatex'ом без встраивания
шрифтов, то он, естественно, ещё меньше по объёму.

	Стоит, может быть, упомянуть, что, чтобы Acrobat Reader
мог печатать постскрипт в файл на компьютере, управляемом
операционной системой Windows, в ней должен быть установлен (и
использован при печати в файл) драйвер какого-нибудь
постскриптовского принтера --- такого, например, как Apple Laser
Writer. Преобразовать полученный постскриптовский файл в pdf
можно как с помощью программы Acrobat Distiller, так и
посредством упомянутой выше ps2pdf или ещё одной свободно
распространяемой программы, pstill.

	На юниксовских машинах может быть целесообразным
использовать шрифты не в ttf- или otf-формате, а преобразовав их
в постскрипт: качество печати может оказаться выше, а к тому же
ТеХ гораздо лучше приспособлен к работе с постскриптовскими
шрифтами. 

	Преобразование шрифта True Type в постскрипт может быть
произведено, например, программой ttf2pt1, свободно лежащей в
интернете, с помощью команды 

     ttf2pt1 -b -a -Os -mh=750 -l cyrillic fontname.ttf

В процессе работы программа иногда выражает недовольство
обрабатываемым ttf-шрифтом, но это ещё отнюдь не означает, что
построенный ею постскриптовский шрифт будет негодным. Кроме
требуемого постскриптовского файла шрифта с расширением pfb,
который должен быть помещён в какой-нибудь подкаталог каталога
TEXMF/fonts/type1, программа строит ещё один файл с расширением
afm, который TeX'у не нужен и который можно просто удалить.
Данную команду надо отдать для каждого подвергаемого
преобразованию файла шрифта.

	Постскриптовские шрифты могут быть построены из шрифта
True Type или Open Type также с помощью подходящего шрифтового
редактора, например, свободно распространяемого редактора
pfaedit. Считав исходный шрифт в редактор, перед генерацией его
постскриптовского варианта надо только поменять исходную
уникодовскою кодировку на кодировку "TeX base (8r)", а в меню
генерации шрифта установить формат шрифта "PS Type1 (binary)",
которой отвечает расширение .pfb.

	Для использования постскриптовских вариантов шрифтов
гарнитур Миньон и Палатино в пакете имеются файлы pala-ps.map и
pala-ps-m.map, которыми применяются точно так же, как файлы
oldf-ps.map и oldf-ps-m.map, соответственно (см. выше). Следует
только проследить, чтобы pfb-файлы шрифтов были названы именно
такими именами, которые стоят в конце строчек этих map-файлов. 

	После добавления шрифтовых файлов в каталог TeX
необходимо дать команду обновления базы данных, с помощью которой
TeX и другие его программы ищут необходимые им данные (texhash и
т.п.).

	Теперь несколько слов о том, с помощью каких программ
можно работать со всеми этими шрифтами. Относительно шрифтов
формата Open Type это уже было подробно рассказано. Шрифтами True
Type можно пользоваться, обрабатывая документ посредством
pdflatex и просматривая получающийся pdf-файл с помощью программы
xpdf, gv или Acrobat Reader. Другой возможный вариант построения
pdf-файла --- обработка документа с помощью latex и dvipdfm. Если
требуется иметь постскриптовский файл документа c шрифтами True
Type, то он может быть получен из pdf-варианта печатью в файл из
программ xpdf или Acrobat Reader, а также с помощью программы
pdftops, входящей в состав комплекса xpdf. 

	Что же касается шрифтов PS Type 1, то при их применении
все описанные в предыдущем абзаце возможности сохраняются, но
добавляется ещё, пожалуй, наиболее удобная для работы комбинация
latex - xdvi. Постскриптовский файл для печати может быть тогда
создан с помощью dvips, а pdf --- с помощью dvipdfm, pdflatex или
ps2pdf.

	В заключение отметим один недостаток программы pfdlatex:
в кодировке t2d она не включает в капитель дореформенные буквы.
Для полноценного использования капители в кодировке t2d нужны
постскриптовские шрифты и обычный latex. Не всегда безупречно
работает и dvipdfm.


			А.В.Дмитриев,
						8 января 2008 г.

					http://lizard.phys.msu.su
